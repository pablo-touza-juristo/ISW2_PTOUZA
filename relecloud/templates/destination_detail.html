{% extends 'base.html' %}

{% block title %}
ReleCloud - {{ destination }}
{% endblock %}

{% block content %}
<h1>{{ destination }}</h1>
<p>
{{ destination.description }}
</p>

<!-- Bloque destacado con rating -->
{% if destination.avg_rating %}
<div class="alert alert-info" role="alert">
    <h4 class="alert-heading">⭐ Calificación de viajeros</h4>
    <p class="mb-0">
        <strong style="font-size: 1.5rem;">{{ destination.avg_rating }}</strong> / 5.0
        <span class="ml-2 text-muted">(basado en {{ destination.review_count }} opiniones)</span>
    </p>
</div>
{% else %}
<div class="alert alert-secondary" role="alert">
    <p class="mb-0">Sin opiniones todavía. ¡Sé el primero en compartir tu experiencia!</p>
</div>
{% endif %}

{% if user.is_authenticated %}
<p>
    <a href="{% url 'info_request' %}" class="btn btn-primary">Request Information</a>
    <a href="{% url 'review_create' destination.id %}" class="btn btn-outline-secondary">Escribir opinión</a>
</p>
{% else %}
<p>
    <a href="{% url 'login' %}" class="btn btn-primary">Login to Request Information</a>
</p>
{% endif %}

<p>You can explore {{ destination }} on the following cruises:</p>
<ul class="list-group">
    {% for cruise in destination.cruises.all %}
    <a class="list-group-item list-group-item-action" href="{% url 'cruise_detail' cruise.id %}">{{ cruise }}</a>
    {% endfor %}
</ul>
{% endblock content %}